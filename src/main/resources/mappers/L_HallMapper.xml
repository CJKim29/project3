<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.githrd.project3.dao.L_HallMapper">

 <select id="selectSeatsByPerformanceAndDate" parameterType="map" resultType="l_hall">
        select l.*
        from l_hall l
        join performance_date cd on l.performance_date_idx = cd.performance_date_idx
        where cd.performance_idx = #{performance_idx} and substring(cd.performance_date_date, 1, 10) = #{performance_date}
 </select>

 <update id="updateSeatStatus" parameterType="map">
        UPDATE l_hall
        SET ${col} = 1
        WHERE performance_date_idx = #{performance_date_idx}
        AND l_hall_row_no = #{row}
 </update>

 <!-- <update id="updateSeatStatus" parameterType="map">
      UPDATE l_hall AS s
      JOIN cart_seat AS cs ON m.seat_idx = cs.seat_idx
      SET l.${col} = 1, cs.reserved = 1
      WHERE l.performance_date_idx = #{performance_date_idx}
      AND l.l_hall_row_no = #{row}
      AND cs.cart_idx = #{cart_idx}; 
  </update> -->
</mapper>